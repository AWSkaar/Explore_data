---
title: "explore_data"
format: html
editor: visual
---

```{r}
#| label: setup
library(readxl)
library(tidyverse)
library(writexl)
library(PxWebApiData)
```

```{r}
Ssb10540 <- read_excel("Ssb10540.xlsx")

```

```{r}
#| eval: false
View(Ssb10540)
```

```{r}
names(Ssb10540)
```

```{r}
names(Ssb10540) <-c("knr","alder", "mnd", "arbl")
```

```{r}
Ssb10540 <- fill(Ssb10540,knr,alder, .direction = "down")
```

## lagre data

```{r}
x <-5
```

```{r}
save(Ssb10540, x, file = "my-first-data.RData")
rm(Ssb10540, x)
```

```{r}
load(file = "my-first-data.RData")
```

```{r}
write_xlsx(
  x= Ssb10540, 
  path = "ssb10540.xlsx")

```

```{r}
write_csv(Ssb10540, file = "ssb10540.csv")
```

## Ssb web API

```{r}
#Get more info about table
ApiData(
"http://data.ssb.no/api/v0/en/table/10540",
returnApiQuery = TRUE
) 
```


```{r} 
#| paged.print: false
ApiData(
  "http://data.ssb.no/api/v0/en/table/10540",
  returnMetaFrames = TRUE
  )

```

```{r}
unemp99to02 <- ApiData12(
  urlToData = "https://data.ssb.no/api/v0/en/table/10540/",
  # or
  # urlToData = "10540"
  # Select all municipalities in Vest-Agder and Rogaland
  Region = list(c("10*","11*")),
  # Select two age groups
  Alder = c("15-74", "15-29"),
  # select 1999M01:2002M12
  Tid = c(paste(
    rep(1999:2005, each = 12), 
    "M",
    sprintf("%02d", 1:12), 
    sep = "")
    )
  ) |> 
  # convert from dataframe to tibble
  as_tibble()
```

